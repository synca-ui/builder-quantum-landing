[build]
# KORREKTUR: Führen Sie den Haupt-Build-Befehl aus, der Server UND Client baut.
command = "npm run build"

# Das Verzeichnis, in dem Ihre Serverless-Funktionen nach dem Build liegen.
functions = "netlify/functions"

# Das Verzeichnis, das die fertige Frontend-App enthält.
publish = "dist/spa"


[functions]
node_bundler = "esbuild"

# Leitet alle API-Anfragen an Ihre Serverless-Funktion weiter.
# Diese Regel ist entscheidend und scheint bereits korrekt zu sein.
[[redirects]]
from = "/api/*"
to = "/.netlify/functions/api/:splat"
status = 200
force = true

# Fallback für Single-Page-Applications (SPA), damit Links wie /dashboard direkt aufgerufen werden können.
[[redirects]]
from = "/*"
to = "/index.html"
status = 200